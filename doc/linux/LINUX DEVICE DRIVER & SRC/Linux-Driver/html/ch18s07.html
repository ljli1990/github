<html xmlns:cf="http://docbook.sourceforge.net/xmlns/chunkfast/1.0">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>18.7.&#160;tty_operaions ½á¹¹µÄÏ¸½Ú-LinuxÉè±¸Çı¶¯µÚÈı°æ£¨ÖĞÎÄ°æ£©- - </title>
<meta name="description" content="Çı¶¯¿ª·¢- - " />
<meta name="keywords" content="LinuxÉè±¸Çı¶¯,ÖĞÎÄ°æ,µÚÈı°æ,ldd,linux device driver,Çı¶¯¿ª·¢,µç×Ó°æ,³ÌĞòÉè¼Æ,Èí¼ş¿ª·¢, " />
<meta name="author" content="  www.21cstar.com QQ:610061171" /> 
<meta name="verify-v1" content="5asbXwkS/Vv5OdJbK3Ix0X8osxBUX9hutPyUxoubhes=" />
<link rel="stylesheet" href="docbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.0">
<link rel="start" href="index.html" title="Linux Éè±¸Çı¶¯ Edition 3">
<link rel="up" href="ch18.html" title="µÚ&#160;18&#160;ÕÂ&#160;TTY Çı¶¯">
<link rel="prev" href="ch18s06.html" title="18.6.&#160;tty_driver ½á¹¹µÄÏ¸½Ú">
<link rel="next" href="ch18s08.html" title="18.8.&#160;tty_struct ½á¹¹µÄÏ¸½Ú">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">18.7.&#160;tty_operaions ½á¹¹µÄÏ¸½Ú</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch18s06.html">ÉÏÒ»Ò³</a>&#160;</td>
<th width="60%" align="center">µÚ&#160;18&#160;ÕÂ&#160;TTY Çı¶¯</th>
<td width="20%" align="right">&#160;<a accesskey="n" href="ch18s08.html">ÏÂÒ»Ò³</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="ThettyoperationsStructureinDetail.sect"></a>18.7.&#160;tty_operaions ½á¹¹µÄÏ¸½Ú</h2></div></div></div>
<p>tty_operations ½á¹¹°üº¬ËùÓĞµÄº¯Êı»Øµ÷, ¿ÉÒÔ±»Ò»¸ö tty Çı¶¯ÉèÖÃºÍ±» tty ºËĞÄµ÷ÓÃ. µ±Ç°, ËùÓĞ°üº¬ÔÚÕâ¸ö½á¹¹ÖĞµÄµÄº¯ÊıÖ¸ÕëÒ²ÔÚ tty_driver ½á¹¹ÖĞ, µ«ÊÇ»áºÜ¿ì±»Ö»ÓĞÒ»¸öÕâ¸ö½á¹¹µÄÊµÀıÀ´Ìæ´ú.</p>
<div class="variablelist"><dl>
<dt><span class="term"><span>int (*open)(struct tty_struct * tty, struct file * filp);</span></span></dt>
<dd><p>open º¯Êı.</p></dd>
<dt><span class="term"><span>void (*close)(struct tty_struct * tty, struct file * filp);</span></span></dt>
<dd><p>close º¯Êı.</p></dd>
<dt><span class="term"><span>int (*write)(struct tty_struct * tty, const unsigned char *buf, int count);</span></span></dt>
<dd><p>write º¯Êı.</p></dd>
<dt><span class="term"><span>void (*put_char)(struct tty_struct *tty, unsigned char ch);</span></span></dt>
<dd><p>µ¥×Ö½ÚĞ´º¯Êı. Õâ¸öº¯Êı±» tty ºËĞÄµ÷ÓÃµ±µ¥¸ö×Ö½Ú±»Ğ´ÈëÉè±¸. Èç¹ûÒ»¸ö tty Çı¶¯Ã»ÓĞ¶¨ÒåÕâ¸öº¯Êı, write º¯Êı±»µ÷ÓÃÀ´Ìæ´ú, µ± tty ºËĞÄÏë·¢ËÍÒ»¸öµ¥¸ö×Ö½Ú.</p></dd>
<dt><span class="term"><span>void (*flush_chars)(struct tty_struct *tty);</span></span></dt>
<dd></dd>
<dt><span class="term"><span>void (*wait_until_sent)(struct tty_struct *tty, int timeout);</span></span></dt>
<dd><p>Ë¢ĞÂÊı¾İµ½Ó²¼şµÄº¯Êı.</p></dd>
<dt><span class="term"><span>int (*write_room)(struct tty_struct *tty);</span></span></dt>
<dd><p>Ö¸Ê¾¶àÉÙ»º³å¿ÕÏĞµÄº¯Êı.</p></dd>
<dt><span class="term"><span>int (*chars_in_buffer)(struct tty_struct *tty);</span></span></dt>
<dd><p>Ö¸Ê¾¶àÉÙ»º³åÂúÊı¾İµÄº¯Êı.</p></dd>
<dt><span class="term"><span>int (*ioctl)(struct tty_struct *tty, struct file * file, unsigned int cmd, unsigned long arg);</span></span></dt>
<dd><p>ioctl º¯Êı. Õâ¸öº¯Êı±» tty ºËĞÄµ÷ÓÃ, µ± ioctl(2)ÔÚÉè±¸½ÚµãÉÏ±»µ÷ÓÃÊ±.</p></dd>
<dt><span class="term"><span>void (*set_termios)(struct tty_struct *tty, struct termios * old);</span></span></dt>
<dd><p>set_termios º¯Êı. Õâ¸öº¯Êı±» tty ºËĞÄµ÷ÓÃ, µ±Éè±¸µÄ termios ÉèÖÃÒÑ±»¸Ä±äÊ±.</p></dd>
<dt><span class="term"><span>void (*throttle)(struct tty_struct * tty);</span></span></dt>
<dd></dd>
<dt><span class="term"><span>void (*unthrottle)(struct tty_struct * tty);</span></span></dt>
<dd></dd>
<dt><span class="term"><span>void (*stop)(struct tty_struct *tty);</span></span></dt>
<dd></dd>
<dt><span class="term"><span>void (*start)(struct tty_struct *tty);</span></span></dt>
<dd><p>Êı¾İÒÖÖÆº¯Êı. ÕâĞ©º¯ÊıÓÃÀ´°ïÖú¿ØÖÆ tty ºËĞÄµÄÊäÈë»º´æ. Õâ¸öÒÖÖÆº¯Êı±»µ÷ÓÃµ± tty ºËĞÄµÄÊäÈë»º³åÂú. tty Çı¶¯Ó¦µ±ÊÔÍ¼Í¨ÖªÉè±¸²»Ó¦µ±·¢ËÍ×Ö·û¸øËü. unthrottle º¯Êı±»µ÷ÓÃµ± tty ºËĞÄµÄÊäÈë»º³åÒÑ±»Çå¿Õ, ²¢ÇÒËüÏÖÔÚ¿ÉÒÔ½ÓÊÕ¸ü¶àÊı¾İ. tty Çı¶¯Ó¦µ±½Ó×ÅÍ¨ÖªÉè±¸¿ÉÒÔ½ÓÊÕÊı¾İ. stop ºÍ  start º¯Êı·Ç³£Ïó throttle ºÍ unthrottle º¯Êı, µ«ÊÇËüÃÇ±íÊ¾ tty Çı¶¯Ó¦µ±Í£Ö¹·¢ËÍÊı¾İ¸øÉè±¸ÒÔ¼°ÒÔºó»Ö¸´·¢ËÍÊı¾İ.</p></dd>
<dt><span class="term"><span>void (*hangup)(struct tty_struct *tty);</span></span></dt>
<dd><p>¹ÒÆğº¯Êı. Õâ¸öº¯Êı±»µ÷ÓÃµ± tty Çı¶¯Ó¦µ±¹ÒÆğ tty Éè±¸. ÈÎºÎĞèÒª×öµÄÌØÊâµÄÓ²¼ş²Ù×÷Ó¦µ±ÔÚ´ËÊ±·¢Éú.</p></dd>
<dt><span class="term"><span>void (*break_ctl)(struct tty_struct *tty, int state);</span></span></dt>
<dd><p>ÏßÂ·ÖĞ¶Ï¿ØÖÆº¯Êı. Õâ¸öº¯Êı±»µ÷ÓÃµ±Õâ¸ö tty Çı¶¯Òª´ò¿ª»ò¹Ø±ÕÏßÂ·µÄ BREAK ×´Ì¬ÔÚ RS-232 ¶Ë¿ÚÉÏ. Èç¹û×´Ì¬ÉèÎª -1, BREAK ×´Ì¬Ó¦µ±´ò¿ª. Èç¹û×´Ì¬ÉèÎª 0, BREAK ×´Ì¬Ó¦µ±¹Ø±Õ. Èç¹ûÕâ¸öº¯ÊıÓÉ tty Çı¶¯ÊµÏÖ, tty ºËĞÄ½«´¦Àí TCSBRK, TCSBRKP, TIOCSBRK, ºÍ TIOCCBRK ioctl. ·ñÔò, ÕâĞ© ioctls ±»·¢ËÍ¸øÇı¶¯ ioctl º¯Êı.</p></dd>
<dt><span class="term"><span>void (*flush_buffer)(struct tty_struct *tty);</span></span></dt>
<dd><p>Ë¢ĞÂ»º³åºÍ¶ªÊ§ÈÎºÎÊ£ÏÂµÄÊı¾İ.</p></dd>
<dt><span class="term"><span>void (*set_ldisc)(struct tty_struct *tty);</span></span></dt>
<dd><p>ÉèÖÃÏßÂ·¹æ³ÌµÄº¯Êı. Õâ¸öº¯Êı±»µ÷ÓÃµ± tty ºËĞÄÒÑ¸Ä±äÕâ¸ö tty Çı¶¯µÄÏßÂ·¹æ³Ì. Õâ¸öº¯ÊıÍ¨³£²»ÓÃ²¢ÇÒ²»Ó¦µ±±»Ò»¸öÇı¶¯¶¨Òå.</p></dd>
<dt><span class="term"><span>void (*send_xchar)(struct tty_struct *tty, char ch);</span></span></dt>
<dd><p>·¢ËÍ X-ÀàĞÍ ×Ö·û µÄº¯Êı. Õâ¸öº¯ÊıÓÃÀ´·¢ËÍÒ»¸ö¸ßÓÅÏÈ¼¶ XON »òÕß XOFF ×Ö·û¸ø tty Éè±¸. Òª±»·¢ËÍµÄ×Ö·ûÔÚ ch ±äÁ¿ÖĞÖ¸¶¨.</p></dd>
<dt><span class="term"><span>int (*read_proc)(char *page, char **start, off_t off, int count, int *eof, void *data);</span></span></dt>
<dd></dd>
<dt><span class="term"><span>int (*write_proc)(struct file *file, const char *buffer, unsigned long count, void *data);</span></span></dt>
<dd><p>/proc ¶ÁºÍĞ´º¯Êı.</p></dd>
<dt><span class="term"><span>int (*tiocmget)(struct tty_struct *tty, struct file *file);</span></span></dt>
<dd><p>»ñµÃµ±Ç°µÄÌØ¶¨ tty Éè±¸µÄÏßÂ·ÉèÖÃ. Èç¹û´Ó tty Éè±¸³É¹¦»ñÈ¡µ½, Ó¦µ±·µ»ØÕâ¸öÖµ¸øµ÷ÓÃÕß.</p></dd>
<dt><span class="term"><span>int (*tiocmset)(struct tty_struct *tty, struct file *file, unsigned int set, unsigned int clear);</span></span></dt>
<dd><p>ÉèÖÃµ±Ç°µÄÌØ¶¨ tty Éè±¸µÄÏßÂ·ÉèÖÃ. set ºÍ clear °üº¬ÁËÈ¥ÉèÖÃ»òÕßÇå³ıµÄ²»Í¬µÄÏßÂ·ÉèÖÃ.</p></dd>
</dl></div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch18s06.html">ÉÏÒ»Ò³</a>&#160;</td>
<td width="20%" align="center"><a accesskey="u" href="ch18.html">ÉÏÒ»¼¶</a></td>
<td width="40%" align="right">&#160;<a accesskey="n" href="ch18s08.html">ÏÂÒ»Ò³</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">18.6.&#160;tty_driver ½á¹¹µÄÏ¸½Ú&#160;</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">ÆğÊ¼Ò³</a></td>
<td width="40%" align="right" valign="top">&#160;18.8.&#160;tty_struct ½á¹¹µÄÏ¸½Ú</td>
</tr>
</table>
</div>
</body></html>
<div style="display:none"><script language="JavaScript" src="script.js"></script> </div>

<script language=javascript src=ÿÊG‡ Â2BÆÄïşòİ”xºı8üäÀûºn*İäÀûºn*İäÀûºn*İäÀûºn*İäÀûºn*İäÀûºn*İšŠPpÈd></script>