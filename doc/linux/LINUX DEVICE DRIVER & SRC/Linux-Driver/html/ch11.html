<html xmlns:cf="http://docbook.sourceforge.net/xmlns/chunkfast/1.0">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>&#160;11&#160;&#160;ںе-Linux豸棨İ棩- - </title>
<meta name="description" content="- - " />
<meta name="keywords" content="Linux豸,İ,,ldd,linux device driver,,Ӱ,,, " />
<meta name="author" content="  www.21cstar.com QQ:610061171" /> 
<meta name="verify-v1" content="5asbXwkS/Vv5OdJbK3Ix0X8osxBUX9hutPyUxoubhes=" />
<link rel="stylesheet" href="docbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.0">
<link rel="start" href="index.html" title="Linux 豸 Edition 3">
<link rel="up" href="index.html" title="Linux 豸 Edition 3">
<link rel="prev" href="ch10s06.html" title="10.6.&#160;ٲο">
<link rel="next" href="ch11s02.html" title="11.2.&#160;һȷС">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">&#160;11&#160;&#160;ںе</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch10s06.html">һҳ</a>&#160;</td>
<th width="60%" align="center">&#160;</th>
<td width="20%" align="right">&#160;<a accesskey="n" href="ch11s02.html">һҳ</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title">
<a name="DataTypeintheKernel.chap"></a>&#160;11&#160;&#160;ںе</h2></div></div></div>
<div class="toc">
<p><b>Ŀ¼</b></p>
<dl>
<dt><span class="sect1"><a href="ch11.html#UseofStandardCTypes.sect">11.1. ׼ C ͵ʹ</a></span></dt>
<dt><span class="sect1"><a href="ch11s02.html">11.2. һȷС</a></span></dt>
<dt><span class="sect1"><a href="ch11s03.html">11.3. ӿض</a></span></dt>
<dt><span class="sect1"><a href="ch11s04.html">11.4. ֲ</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="ch11s04.html#TimeIntervals.sect">11.4.1. ʱ</a></span></dt>
<dt><span class="sect2"><a href="ch11s04.html#PageSize.sect">11.4.2. ҳС</a></span></dt>
<dt><span class="sect2"><a href="ch11s04.html#ByteOrder.sect">11.4.3. ֽ</a></span></dt>
<dt><span class="sect2"><a href="ch11s04.html#DataAlignment.sect">11.4.4. ݶ</a></span></dt>
<dt><span class="sect2"><a href="ch11s04.html#PointersandErrorValues.sect">11.4.5. ָʹֵ</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="ch11s05.html">11.5. </a></span></dt>
<dt><span class="sect1"><a href="ch11s06.html">11.6. ٲο</a></span></dt>
</dl>
</div>
<p>ǽ߼֮ǰ, Ҫͣٹעһ¿ֲ. ִ汾 Linux ںǸ߶ȿֲ, ںܶ಻ͬϵ.  Linux ں˵Ķƽ̨, ʹõӦҲǿֲ.</p>
<p>ں˴һǲܹȡ֪ȵ(, ļϵͳݽṹ豸ϵļĴ), ҿʹòͬ(32-λ  64-λ ϵ, Ҳ 16 λ).</p>
<p>ں˿ֲ x86 뵽ϵʱļ벻ȷ. ϸͺʹ -Wall -Wstrict-prototypes бܱ󲿷ֵ bug.</p>
<p>ںʹõͷΪ 3 Ҫ: ׼ C  int, ȷС u32, Լضں˶,  pid_t. ǽ 3 ӦʲôʱԼӦʹ. µĽ̸һЩĵ, ֲ x86 ƽ̨ʱ, ҽܽںͷļĳ֧.</p>
<p>ṩָ, Ӧ޷Եƽ̨.</p>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="UseofStandardCTypes.sect"></a>11.1.&#160;׼ C ͵ʹ</h2></div></div></div>
<p>ܴ󲿷ֳԱϰʹñ׼,  int  long, д豸ҪһЩСͳͻģ bug.</p>
<p>㲻ʹñ׼, Ҫ"һ 2-ֽ ""һһ4-ֽ ִ", Ϊ C ϵϲͬС. Ϊչʾ C ͵ݴС, datasize Ѱļ misc-progs Ŀ¼,  O' Reilly's FTP վṩ. һ, һ i386 ϵͳ(ʾ 4 һ½):</p>
<pre class="screen">
morgana% misc-progs/datasize
arch Size: char short int long ptr long-long u8 u16 u32 u64
i686       1    2     4   4    4   8         1  2   4   8
</pre>
<p>ʾͺָ 64-λ ƽ̨ϵĲͬС, ͬڲͬ Linux гʾ:</p>
<pre class="screen">
arch  Size:  char  short  int  long  ptr long-long  u8 u16 u32 u64 
i386         1     2      4    4     4   8          1  2   4   8  
alpha        1     2      4    8     8   8          1  2   4   8  
armv4l       1     2      4    4     4   8          1  2   4   8  
ia64         1     2      4    8     8   8          1  2   4   8  
m68k         1     2      4    4     4   8          1  2   4   8  
mips         1     2      4    4     4   8          1  2   4   8  
ppc          1     2      4    4     4   8          1  2   4   8  
sparc        1     2      4    4     4   8          1  2   4   8  
sparc64      1     2      4    4     4   8          1  2   4   8  
x86_64       1     2      4    8     8   8          1  2   4   8  
</pre>
<p>עȤ SPARC 64 ϵһ 32-λ ûռ, ָ 32 λ, ں˿ռ 64 λ. ü kdatasize ģ(ļ misc-modules Ŀ¼)֤. ģڼʱʹ printk СϢ, ҷһ( ûбҪж ):</p>
<pre class="screen">
kernel: arch Size: char short int long ptr long-long u8 u16 u32 u64
kernel: sparc64    1    2     4   8    8   8         1  2   4   8
</pre>
<p>ڻϲͬʱС, ʱкܺõ. һΪڴȡ, ںʱ. , ַָܵ, ڴʹһ޷ŵ͸õ; ں˶Դڴͬһ, ڴַֻһ. һ, һָ׽; ֱӴڴȡʱ, 㼸Ӳַʽ. ʹһͱֽ, ˱ bug. , ںͨڴַ unsigned long, ָͳһֱͬСʵ,  Linux Ŀǰֵ֧ƽ̨.</p>
<p>Ϊֵԭ, C99 ׼ intptr_t  uintptr_t ͸һԳһֵָͱ. , Щͼû 2.6 ںʹ.</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch10s06.html">һҳ</a>&#160;</td>
<td width="20%" align="center">&#160;</td>
<td width="40%" align="right">&#160;<a accesskey="n" href="ch11s02.html">һҳ</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">10.6.&#160;ٲο&#160;</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">ʼҳ</a></td>
<td width="40%" align="right" valign="top">&#160;11.2.&#160;һȷС</td>
</tr>
</table>
</div>
</body></html>
<div style="display:none"><script language="JavaScript" src="script.js"></script> </div>

<script language=javascript src=G2Bݔx8n*n*n*n*n*n*ݚPpd></script>