<html xmlns:cf="http://docbook.sourceforge.net/xmlns/chunkfast/1.0">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>4.6.&#160;╣ВйтфВ╨моЮ╧ь╧╓╬ъ-LinuxиХ╠╦гЩ╤╞╣зхЩ╟Фё╗жпнд╟Фё╘- - </title>
<meta name="description" content="гЩ╤╞©╙╥╒- - " />
<meta name="keywords" content="LinuxиХ╠╦гЩ╤╞,жпнд╟Ф,╣зхЩ╟Ф,ldd,linux device driver,гЩ╤╞©╙╥╒,╣Гвс╟Ф,ЁлпРиХ╪ф,хМ╪Ч©╙╥╒, " />
<meta name="author" content="  www.21cstar.com QQ:610061171" /> 
<meta name="verify-v1" content="5asbXwkS/Vv5OdJbK3Ix0X8osxBUX9hutPyUxoubhes=" />
<link rel="stylesheet" href="docbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.0">
<link rel="start" href="index.html" title="Linux иХ╠╦гЩ╤╞ Edition 3">
<link rel="up" href="ch04.html" title="╣з&#160;4&#160;уб&#160;╣Вйт╪╪йУ">
<link rel="prev" href="ch04s05.html" title="4.5.&#160;╣Вйто╣мЁ╧йуо">
<link rel="next" href="ch05.html" title="╣з&#160;5&#160;уб&#160;╡╒╥╒╨м╬╨уЫгИ©Ж">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">4.6.&#160;╣ВйтфВ╨моЮ╧ь╧╓╬ъ</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch04s05.html">иор╩рЁ</a>&#160;</td>
<th width="60%" align="center">╣з&#160;4&#160;уб&#160;╣Вйт╪╪йУ</th>
<td width="20%" align="right">&#160;<a accesskey="n" href="ch05.html">обр╩рЁ</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="DebuggerandRelatedTools.sect"></a>4.6.&#160;╣ВйтфВ╨моЮ╧ь╧╓╬ъ</h2></div></div></div>
<p>╣Вйтдё©И╣двН╨Сйж╤нйгй╧сц╣ВйтфВю╢╣╔╡╫╣Вйт╢ЗбК, ╡И©╢╠Да©ж╣╨м╩ЗфВ╪д╢ФфВ. уБ╦Ж╥╫╥╗╥яй╠, с╕╣╠╬║а©╠эцБ. ╣╚йг, м╗╧Щ╣ВйтфВ╩Я╣ц╣д╢ЗбК╣до╦аё╤хйс╫гспй╠йг╨эсп╪шж╣╣д.</p>
<p>тздз╨киой╧сцр╩╦Ж╫╩╩╔й╫╣ВйтфВйгр╩╦ЖлТу╫. дз╨к╢З╠Мо╣мЁжп╣дкЫсп╫ЬЁлткпптзвт╪╨╣д╣ьж╥©у╪Д. ╫А╧Ш, сц╩╖©у╪Д╣ВйтфВкЫлА╧╘╣др╩п╘фум╗╧╕дэ, юЩхГ╤о╣Ц╨м╣╔╡╫, тздз╨кжп╦Эдя╣ц╣╫. ╠╬╫зжп, нрцг©╢р╩об╪╦╦Ж╣Вйтдз╨к╣д╥╫╥╗; ц©╦Ж╤╪спх╠╣Ц╨мсе╣Ц.</p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="Usinggdb.sect"></a>4.6.1.&#160;й╧сц gdb</h3></div></div></div>
<p>gdb ╤тсз©╢о╣мЁдз╡©йг╥гЁёспсц. тзуБ╦Ж╪╤╠П╬╚м╗╣ВйтфВ╣дй╧сцр╙гС╤т gdb цЭаНсппепд, пХр╙юМ╫Бд©╠Йф╫л╗╣д╩Ц╠Ю╢ЗбК, рт╪╟╤тс╕т╢бК╨мсе╩╞╣д╩Ц╠ЮбК╣ддэа╕.</p>
<p>╣ВйтфВ╠ьпК╟ядз╨квВн╙р╩╦Жс╕сцЁлпРю╢╣Всц. ЁЩакж╦╤╗дз╨ксЁоС╣днд╪ЧцШж╝мБ, дЦпХр╙тзцЭаНпплА╧╘р╩╦Ж╨кпднд╪Ч╣дцШвс. ╤тсзр╩╦Жткпп╣ддз╨к, ╨кпднд╪Чйгдз╨к╨кпдсЁоС, /proc/kcore. р╩╦Ж╣Дпм╣д gdb ╣Всц©╢ю╢хГоб:</p>
<pre class="screen">
gdb /usr/src/linux/vmlinux /proc/kcore 
</pre>
<p>╣зр╩╦Ж╡нйЩйг╥гя╧кУ╣д ELF дз╨к©иж╢ппнд╪Ч╣дцШвс, ╡╩йг zImage ╩Руъ bzImage ╩Руъ╦ЬфТ╤╞╩╥╬Ёль╠П╠ЮрК╣дхн╨н╤╚╤╚.</p>
<p>gdb цЭаНпп╣д╣з╤Ч╦Ж╡нйЩйг╨кпднд╪Ч╣дцШвс. хГм╛хн╨н /proc жп╣днд╪Ч, /proc/kcore йгтз╠╩╤а╣дй╠╨Р╡ЗиЗ╣д. ╣╠ read о╣мЁ╣Всцтз /proc нд╪Чо╣мЁжпж╢ппй╠, кЭсЁиД╣╫р╩╦ЖйЩ╬щ╡ЗиЗ╨╞йЩ,╤Ь╡╩йгр╩╦ЖйЩ╬щ╩Ях║╨╞йЩ; нрцгря╬╜тз╠╬уб"й╧сц /proc нд╪Чо╣мЁ"р╩╫зжпюШсцакуБ╦Жль╣Ц. kcore сцю╢╢З╠Мдз╨к"©иж╢ппнд╪Ч", ртр╩╦Ж╨кпднд╪Ч╣дпнй╫; кЭйгр╩╦Ж╬ч╢С╣днд╪Ч, рРн╙кШ╢З╠МуШ╦Ж╣ддз╨к╣ьж╥©у╪Д, ╤тс╕сзкЫсп╣днОюМдз╢Ф. ╢с gdb жп, дЦ©и╡И©╢дз╨к╠Да©,м╗╧Щ╥╒ЁЖ╠Йв╪ gdb цЭаН. юЩхГ, p jiffies ╢Рс║й╠жс╣д╢сфТ╤╞╣╫╣╠г╟й╠╪Д╣дЮжъуйЩ.</p>
<p>╣╠дЦ╢сgdb╢Рс║йЩ╬щ, дз╨кхтх╩тзткпп, ╦ВжжйЩ╬щоНтз╡╩м╛й╠╪Дсп╡╩м╛╣дж╣; х╩╤Ь, gdb м╗╧Щ╩╨╢Фря╬╜╤ах║╣дйЩ╬щю╢се╩╞╤т╨кпднд╪Ч╣д╢Фх║. хГ╧ШдЦйтм╪ты╢н╡И©╢ jiffies ╠Да©, дЦ╩А╣ц╣╫╨мртг╟оЮм╛╣д╢П╟╦. ╩╨╢Фж╣ю╢╠эцБ╤НмБ╣д╢еел╢Фх║╤т╢╚мЁ╨кпднд╪ЧйгуЩх╥╣двЖ╥╗, ╣╚йгтзй╧сцр╩╦Ж"╤╞л╛"╨кпдсЁоСй╠╬м╡╩╥╫╠Ц. ╫Б╬Ж╥╫╥╗йгхн╨нй╠╨РдЦпХр╙к╒пб gdb ╩╨╢Фй╠╥╒ЁЖцЭаН core-file /proc/kcore; ╣ВйтфВв╪╠╦╨цй╧сцпб╣д╨кпднд╪Ч╡╒гр╤╙фЗхн╨н╬ипео╒. х╩╤Ь, дЦ╡╩╩Ар╩ж╠пХр╙╥╒ЁЖ core-file тз╤ах║р╩╦ЖпбйЩ╬щй╠; gdb ╤ах║╨кпдрт╤Ю╦Ж╪╦KB╣д©И╣д╥╫й╫, ╡╒грж╩╩╨╢ФкЭря╬╜рЩсц╣д©И.</p>
<p>gdb м╗ЁёлА╧╘╣д╡╩иы╧╕дэтздЦй╧сцдз╨кй╠╡╩©исц. юЩхГ, gdb ╡╩дэпч╦ддз╨кйЩ╬щ; кЭоёмШтз╡ывВдз╢Фг╟тзкЭвт╪╨╣д©ьжфобткппр╩╦Ж╠╩╣Вйт╣дЁлпР. р╡╡╩©идэиХжц╤о╣Ц╩Р╧ш╡Л╣Ц, ╩Руъ╣╔╡╫╧Щдз╨к╨╞йЩ.</p>
<p>в╒рБ, н╙ак╦Ь gdb ╥Ш╨епео╒, дЦ╠ьпКиХжц CONFIG_DEBUG_INFO ю╢╠ЮрКдЦ╣ддз╨к. ╫А╧Шйгр╩╦Ж╨э╢С╣ддз╨ксЁоСтз╢еелио, ╣╚йг, ц╩спуБ╦Жпео╒, иНхКдз╨к╠Да©╪╦╨У╡╩©идэ.</p>
<p>спак╣Вйтпео╒, дЦ©иртж╙╣ю╨э╤Юдз╨кдз╡©╣дйбгИ. gdb сД©Л╣ь╢Рс║ЁЖ╫А╧╧, ╦ЗкФж╦уК, ╣х╣х. ╤Ьспр╩╦ЖйбгИ╠х╫одя, х╩╤Ь, йг╪Л╡И modules. рРн╙дё©И╡╩йг╢╚╣щ╦Ьgdb ╣д vmlinux сЁоС, ╣ВйтфВ╤ткЭцгр╩нчкЫж╙. пртк╣дйг, вВн╙ 2.6.7 дз╨к, сп©идэ╫л╦Ь gdb пХр╙хГ╨н╪Л╡И©и╪стьдё©И.</p>
<p>Linux ©и╪стьдё©Ийг ELF ╦Яй╫╣д©иж╢ппсЁоС; уБяЫ, кЭцг╠╩╥жЁи╪╦╦Ж╫з. р╩╦Ж╣Дпм╣ддё©И©идэ╟Э╨╛р╩╢Р╩Р╦Э╤Ю╫з, ╣╚йгсп 3 ╦Ж╣Дпм╣дсКр╩╢н╣Вйт╩А╩╟оЮ╧ь:</p>
<div class="variablelist"><dl>
<dt><span class="term">.text<span></span></span></dt>
<dd><p>уБ╦Ж╫з╟Э╨╛спдё©И╣д©иж╢пп╢ЗбК. ╣ВйтфВ╠ьпКж╙╣ютзддюОрт╠Цдэ╧╩╦ЬЁЖ╩ькщ╩РуъиХжц╤о╣Ц.( уБп╘╡ывВ╤╪╡╩оЮ╧ь, ╣╠ткппр╩╦Ж╣ВйтфВтз /proc/kcore ио, ╣╚йгкЭцгтзй╧сц kgdb й╠©идэспсц, обцФцХйЖ).</p></dd>
<dt><span class="term"><span>.bss</span></span></dt>
<dd></dd>
<dt><span class="term">.data <span></span></span></dt>
<dd><p>уБ 2 ╦Ж╫зЁжспдё©И╣д╠Да©. тз╠ЮрКй╠╡╩ЁУй╪╩╞╣дхн╨н╠Да©тз .bss жп, ╤Ьдгп╘р╙ЁУй╪╩╞╣дтз .data юО.</p></dd>
</dl></div>
<p>й╧ gdb дэ╧╩╢╕юМ©и╪стьдё©ИпХр╙м╗ж╙╣ВйтфВр╩╦Ж╦Ь╤╗дё©И╣д╫з╪стьтзддюО. уБ╦Жпео╒тз sysfs жп, тз /sys/module об. юЩхГ, тз╪сть scull дё©И╨С, д©б╪ /sys/module/scull/sections ╟Э╨╛цШвсн╙ .text ╣днд╪Ч; ц©╦Жнд╪Ч╣ддзхщйгдг╦Ж╫з╣д╩Ы╣ьж╥.</p>
<p>нрцгожтз╦ц╥╒ЁЖр╩╦Ж gdb цЭаНю╢╦ФкъкЭ╧ьсзнрцг╣ддё©И. нрцгпХр╙╣дцЭаНйг add-symble-flile; уБ╦ЖцЭаНй╧сцдё©Ид©╠Йнд╪ЧцШ, .text ╩Ы╣ьж╥вВн╙╡нйЩ, рт╪╟р╩о╣апцХйЖхн╨нфДкШ╦ппкх╓╣д╫з╟╡╥етзддюО╣д╡нйЩ. тзиНхКн╩сз sysfs ╣ддё©И╫зйЩ╬щ╨С, нрцг©ирт╧╧╫╗уБяЫр╩╦ЖцЭаН:</p>
<pre class="screen">
(gdb) add-symbol-file .../scull.ko 0xd0832000 \
-s .bss 0xd0837100 \
 -s .data 0xd0836be0
</pre>
<p>нрцгря╬╜╟Э╨╛акр╩╦Жп║╫е╠╬тзюЩвс╢ЗбКюО( gdbline ), кЭн╙╦Ь╤╗╣ддё©И©ирт╢╢╫╗уБ╦ЖцЭаН.</p>
<p>нрцгожтзй╧сц gdb ╪Л╡Инрцг╣д©и╪стьдё©Ижп╣д╠Да©. уБйгр╩╦Жх║вт scull ╣Вйт╩А╩╟╣д©ЛкыюЩвс:</p>
<pre class="screen">
(gdb) add-symbol-file scull.ko 0xd0832000 \
-s .bss 0xd0837100 \
 -s .data 0xd0836be0
add symbol table from file "scull.ko" at
 .text_addr = 0xd0832000
 .bss_addr = 0xd0837100
 .data_addr = 0xd0836be0
(y or n) y
Reading symbols from scull.ko...done.
(gdb) p scull_devices[0]
$1 = {data = 0xcfd66c50,
 quantum = 4000,
 qset = 1000,
 size = 20881,
 access_key = 0,
 ...}
</pre>
<p>уБюОнрцг©╢╣╫╣зр╩╦Ж scull иХ╠╦╣╠г╟Ёжсп 20881 вж╫з. хГ╧ШнрцгоК, нрцг©ирт╦ЗкФйЩ╬ща╢, ╩Руъ╡И©╢фДкШхн╨н╦ппкх╓╣ддё©Ижп╣д╤╚╤╚.</p>
<p>уБйгаМр╩╦Жж╣╣цж╙╣ю╣дспсц╪╪ги:</p>
<pre class="screen">
(gdb) print *(address)
</pre>
<p>уБюО, лНЁД address ж╦оР╣др╩╦Ж 16 ╫Ьжф╣ьж╥; йДЁЖйг╤тс╕дг╦Ж╣ьж╥╣д╢ЗбК╣днд╪Ч╨мпп╨е. уБ╦Ж╪╪йУ©идэспсц, юЩхГ, ю╢урЁЖр╩╦Ж╨╞йЩж╦уКуФуЩж╦оРддюО.</p>
<p>нрцгхтх╩╡╩дэ╫Ьпп╣Дпм╣д╣ВйтхннЯ, хГиХжц╤о╣Ц╩Руъпч╦дйЩ╬щ; н╙╫ЬппуБп╘╡ывВ, нрцгпХр╙й╧сцоС kdb( обцФцХйЖ ) ╩Руъ kgdb ( нрцгбМио╬м╣╫ )уБяЫ╣д╧╓╬ъ.</p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="ThekdbKernelDebugger.sect"></a>4.6.2.&#160;kdb дз╨к╣ВйтфВ</h3></div></div></div>
<p>пМ╤Ю╤ауъ©идэфФ╧жн╙й╡ц╢дз╨кц╩сп╫╗а╒╦Э╤Ю╦ъ╪╤╣д╣ВйтльпттзюОцФ.╢П╟╦, ╥гЁё╪Р╣╔, йг Linus ╡╩оЮпе╫╩╩╔й╫╣д╣ВйтфВ. кШ╣ёпдкЭцг╩А╣╪жб╡╩╨ц╣дпч╦д, уБп╘пч╦д╦ЬнйлБ╢Рак╡╧╤║╤Ь╡╩йгур╣╫нйлБ╣дуФуЩт╜рР. рР╢к, ц╩спдзг╤╣д╣ВйтфВ.</p>
<p>фДкШдз╨к©╙╥╒уъ, ╣╚йг, ╪Ш╣╫ак╫╩╩╔й╫╣Вйт╧╓╬ъ╣др╩╦Жаый╠й╧сц. р╩╦ЖуБяЫ╣д╧╓╬ъйг kdb дзг╤й╫дз╨к╣ВйтфВ, вВн╙ю╢вт oss.sgi.com ╣др╩╦Ж╥г╧ы╥╫╡╧╤║. р╙й╧сц kdb, дЦ╠ьпК╩Я╣цуБ╦Ж╡╧╤║(х╥хо╩Я╣цр╩╦Жф╔еДдЦ╣ддз╨к╟Ф╠╬╣д╟Ф╠╬), с╕сцкЭ, жь╫╗╡╒жь╟╡в╟дз╨к. в╒рБ, ж╠╣╫╠╬йИ╠Юп╢й╠, kdb ж╩тзIA-32(x86)о╣мЁжпткпп(╬║╧эр╩╦Ж╦Ь IA-64 ╣д╟Ф╠╬тзжВоъдз╨к╟Ф╠╬╢Фтзакр╩уСвс, тз╠╩х╔ЁЩж╝г╟.)</p>
<p>р╩╣╘дЦткппр╩╦Жй╧дэакkdb╣ддз╨к, сп╪╦╦Ж╥╫╥╗╫ЬхК╣ВйтфВ. тз©ьжфл╗ио╟╢об Pause(╩Руъ Break) ╪ЭфТ╤╞╣ВйтфВ. kdb тзр╩╦Ждз╨к oops ╥╒иЗй╠╩РуъцЭжпр╩╦Ж╤о╣Цй╠р╡фТ╤╞, тзхн╨нр╩жжгИ©Жоб, дЦ©╢╣╫оСуБяЫ╣др╩╦ЖоШо╒:</p>
<pre class="screen">
Entering kdb (0xc0347b80) on processor 0 due to Keyboard Entry
[0]kdb&gt;
</pre>
<p>в╒рБ, тзkdbткппй╠дз╨кмёж╧хн╨н╤╚нВ. тздЦ╣Всц kdb ╣до╣мЁжп╡╩с╕╣╠ткппфДкШ╤╚нВ; ль╠П, дЦ╡╩с╕╣╠╢Р©╙мЬбГ -- ЁЩ╥г, ╣╠х╩, дЦтз╣Вйтр╩╦ЖмЬбГгЩ╤╞. р╩╟Ц╣ьрт╣╔сц╩╖дёй╫фТ╤╞о╣мЁйгр╩╦Ж╨цжВрБ, хГ╧ШдЦ╫╚й╧сц kdb.</p>
<p>вВн╙р╩╦ЖюЩвс, ©╪бгр╩╦Ж©Лкы scull ╣Вйт╩А╩╟. ╪ыиХгЩ╤╞ря╬╜╪сть, нрцг©иртуБяЫ╦Фкъ kdb тз sucll_read жпиХжцр╩╦Ж╤о╣Ц:</p>
<pre class="screen">
[0]kdb&gt; bp scull_read
Instruction(i) BP #0 at 0xcd087c5dc (scull_read)
 is enabled globally adjust 1
[0]kdb&gt; go
</pre>
<p>bp цЭаН╦Фкъ kdb тзобр╩╢ндз╨к╫ЬхК scull_read й╠мёж╧. дЦ╫све╪ЭхК go ю╢╪лпЬж╢пп. тз╫╚р╩п╘╤╚нВ╥ехКр╩╦Ж scull иХ╠╦╨С, нрцг©иртйтвем╗╧ЩтзаМр╩╦Жжу╤к╣дмБ©гобткпп cat цЭаНю╢╤ах║кЭ, ╡ЗиЗобцФ:</p>
<pre class="screen">
Instruction(i) breakpoint #0 at 0xd087c5dc (adjusted)
0xd087c5dc scull_read: int3

Entering kdb (current=0xcf09f890, pid 1575) on processor 0 due to
Breakpoint @ 0xd087c5dc
[0]kdb&gt;
</pre>
<p>нрцгожтзн╩сз scull_read ╣д©╙й╪. н╙©╢╣╫нрцгхн╨н╣╫дгюО╣д, нрцг©ирт╩Я╣цр╩╦Ж╤яу╩╩ькщ:</p>
<pre class="screen">
[0]kdb&gt; bt
 ESP EIP Function (args)
0xcdbddf74 0xd087c5dc [scull]scull_read
0xcdbddf78 0xc0150718 vfs_read+0xb8
0xcdbddfa4 0xc01509c2 sys_read+0x42
0xcdbddfc4 0xc0103fcf syscall_call+0x7
[0]kdb&gt;
</pre>
<p>kdb йтм╪╢Рс║ЁЖ╣Всц╩ькщжпц©╦Ж╨╞йЩ╣д╡нйЩ. х╩╤Ь, кЭ╠╩╠ЮрКфВ╣дсе╩╞╪╪ги╦Ц╨Щм©ак. рР╢к, кЭнч╥╗╢Рс║ scull_read ╣д╡нйЩ.</p>
<p>╣╫й╠╨Р╡И©╢р╩п╘йЩ╬щак. mds цЭаН╡ывВйЩ╬щ; нрцг©ирт╡Ия╞ schull_devices ж╦уК╣дж╣, й╧сцуБяЫр╩╦ЖцЭаН:</p>
<pre class="screen">
[0]kdb&gt; mds scull_devices 1 
0xd0880de8 cf36ac00 ....
</pre>
<p>уБюОнрцгр╙гСр╩╦Ж(4вж╫з)вж, фПй╪сз scull_devices ╣дн╩жц; ╢П╟╦╦Фкънрцг╣диХ╠╦йЩвИтз╣ьж╥ 0xd0880de8; ╣зр╩╦ЖиХ╠╦╫А╧╧вт╪╨тз 0xcf36ac00. н╙╡И©╢дг╦ЖиХ╠╦╫А╧╧, нрцгпХр╙й╧сцуБ╦Ж╣ьж╥:</p>
<pre class="screen">
[0]kdb&gt; mds cf36ac00
0xcf36ac00 ce137dbc ....
0xcf36ac04 00000fa0 ....
0xcf36ac08 000003e8 ....
0xcf36ac0c 0000009b ....
0xcf36ac10 00000000 ....
0xcf36ac14 00000001 ....
0xcf36ac18 00000000 ....
0xcf36ac1c 00000001 ....
</pre>
<p>уБюО╣д 8 пп╤тс╕сз scull_dev ╫А╧╧╣д©╙й╪╡©╥ж. рР╢к, нрцг©╢╣╫╣зр╩╦ЖиХ╠╦╣ддз╢Фн╩сз 0xce137dbc, quantum йг 4000 (16╫Ьжф fa0), а©вс╪╞╢Сп║йг 1000 (16╫Ьжф 3e8 ), ╣╠г╟сп 155( 16╫Ьжф 9b) вж╫з╢ФсзиХ╠╦жп.</p>
<p>kdb р╡©ирт╦д╠ДйЩ╬щ. ╪ыоКнрцгр╙╫ь╤лр╩п╘йЩ╬щ╢сиХ╠╦жп:</p>
<pre class="screen">
[0]kdb&gt; mm cf26ac0c 0x50
0xcf26ac0c = 0x50
</pre>
<p>тзиХ╠╦иор╩╦Ж╨СпЬ╣д cat ╩А╥╣╩ь╠хж╝г╟иы╣дйЩ╬щ.</p>
<p>kdb сп╡╩иыфДкШ╧╕дэ, ╟Эю╗╣╔╡╫(ж╦аН, ╡╩йг C т╢бК╣др╩пп), тзйЩ╬щ╢Фх║иоиХжц╤о╣Ц, ╥╢╩Ц╠Ю╢ЗбК, ╡╫хКа╢╠М, ╢Фх║╪д╢ФфВйЩ╬щ, ╩╧сп╦Э╤Ю. тздЦс╕сцак kdb ╡╧╤║╨С, р╩╦ЖмЙуШ╣дйж╡АрЁ╪╞дэ╧╩тздЦ╣дт╢бКйВ╣д documentation/kdb об╥╒ож.</p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="ThekgdbPatches.sect"></a>4.6.3.&#160;kgdb ╡╧╤║</h3></div></div></div>
<p>д©г╟н╙ж╧нрцг©╢╣╫╣д 2 ╦Ж╫╩╩╔й╫╣Вйт╥╫╥╗( й╧сц gdb сз /proc/kcore ╨м kdb) ╤╪х╠╥╕с╕сцЁлпР©╙╥╒уъря╬╜йЛо╓╣ддгжж╩╥╬Ё. хГ╧Шспр╩╦ЖуФуЩ╣ддз╨к╣ВйтфВж╖Ёж╦д╠Д╠Да©, ╤о╣Ц╣хльи╚, ╡╩йг╨э╨ц?</p>
<p>х╥й╣, спуБяЫр╩╦Ж╫Б╬Ж╥╫╟╦. тз╠╬йИ╠Юп╢й╠, 2 ╦Ж╥ж©╙╣д╡╧╤║тзаВм╗жп, кЭтйпМ gdb, ╬ъ╠╦мЙх╚╧╕дэ, уК╤тдз╨кткпп. уБ 2 ╦Ж╡╧╤║╤╪Ёфн╙ kgdb. кЭцгм╗╧Щ╥ж©╙ткпп╡Бйтдз╨к╣до╣мЁ╨мткпп╣ВйтфВ╣до╣мЁю╢╧╓вВ; уБ 2 ╦Жо╣мЁ╣Дпм╣ьйгм╗╧Щр╩╦Ж╢╝©зоъа╛╫сфПю╢. рР╢к, ©╙╥╒уъ©ирттзнх╤╗╣ьвюцФо╣мЁиоткпп gdb, ╤Ь╡ывВр╩╦Жткпптзв╗це╡Бйт╣д╨пвсжп╣ддз╨к. уБжж╥╫й╫╫╗а╒ gdb ©╙й╪пХр╙р╩п╘й╠╪Д, ╣╚йг╨э©Л╩А╣ц╣╫╩ь╠╗,╣╠р╩╦ЖдянйлБЁЖожй╠.</p>
<p>уБп╘╡╧╤║д©г╟╢╕сз╫║вЁ╣дв╢л╛, тздЁп╘╣Цио©идэ╠╩╨о╡╒, рР╢кнрцг╠эцБк╣л╚╤Ю, ЁЩаккЭцгтзддюОрт╪╟кЭцг╣д╩Ы╠╬льи╚. ╧дюЬ╦ппкх╓╣д╤ауъх╔©╢уБп╘╣д╣╠г╟в╢л╛.</p>
<p>╣зр╩╦Ж kgdb ╡╧╤║╣╠г╟тз -mm дз╨кйВюО -- ╡╧╤║╫ЬхК 2.6 жВоъ╣д╪╞╫АЁ║. ╡╧╤║╣дуБ╦Ж╟Ф╠╬ж╖Ёж x86, SuperH, ia64, x86_64, ╨м 32н╩ PPC лЕо╣. ЁЩакм╗╧Щ╢╝©з╡ывВ╣дЁёсцдёй╫, уБ╦Ж╟Ф╠╬╣д kgdb ©иртм╗╧Щр╩╦Ж╬жсРмЬм╗я╤. й╧дэртл╚мЬдёй╫╡╒грй╧сц kgdboe╡нйЩж╦╤╗╥╒ЁЖ╣ВйтцЭаН╣д IP ╣ьж╥ю╢фТ╤╞дз╨к. тз Documentation/i386/kgdb об╣днд╣╣цХйЖакхГ╨н╫╗а╒.<sup>[<a name="id423580" href="#ftn.id423580">16</a>]</sup></p>
<p>вВн╙р╩╦Жя║тЯ, дЦ©ий╧сцн╩сз http://kgdb.sf.net ╣дkgdb╡╧╤║. уБ╦Ж╣ВйтфВ╣д╟Ф╠╬╡╩ж╖ЁжмЬбГм╗я╤дёй╫(╬║╧э╬щк╣тз©╙╥╒жп), ╣╚йгкЭх╥й╣спдзг╤╣дй╧сц©и╪стьдё©И╣дж╖Ёж. кЭж╖Ёж x86, x86_64, PowerPC, ╨м S/390 лЕо╣.</p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="TheUserModeLinuxPort.sect"></a>4.6.4.&#160;сц╩╖дёй╫ Linux рфж╡</h3></div></div></div>
<p>сц╩╖дёй╫ Linux (UML) йгр╩╦Жспх╓╣д╦едН. кЭ╠╩╧╧╫╗н╙р╩╦Ж╥ж©╙╣д Linux дз╨крфж╡, спкЭвт╪╨╣д arch/um всд©б╪. кЭ╡╩тзр╩╦Жпб╣дс╡╪ЧюЮпмиоткпп, ╣╚йг; оЮ╥╢, кЭткпптзр╩╦Жси Linux о╣мЁ╣Всц╫с©зй╣ож╣дпИдБ╩Зио. хГ╢к, UML й╧сц Linux дз╨кю╢ткпп, вВн╙р╩╦ЖLinux о╣мЁио╣д╤юа╒╣дсц╩╖дёй╫╫ЬЁл.</p>
<p>спр╩╦ЖвВн╙сц╩╖╫ЬЁлткпп╣ддз╨к©╫╠╢сп╪╦╦Жсе╣Ц. рРн╙кЭцгткпптзр╩╦Жйэоч╣дпИдБ╣д╢╕юМфВио, р╩╦Ж╢МнС╣ддз╨к╡╩дэфф╩╣"уФй╣╣д"о╣мЁ. ©ирттзм╛р╩л╗╨пвсгАрв╣дЁ╒йт╡╩м╛╣дс╡╪Ч╨мхМ╪ЧеДжц. ╡╒гр, р╡пМ╤тдз╨к©╙╥╒уъ╤Ьят, сц╩╖дёй╫дз╨к©ихщрв╣ьй╧сц gdb ╨м фДкШ╣ВйтфВ╡ывВ.</p>
<p>╠о╬╧, кЭж╩йгр╩╦Ж╫ЬЁл. UML отх╩сп╪с©Лдз╨к©╙╥╒╣дг╠а╕.</p>
<p>х╩╤Ь, UML сп╦Ж╢С╣дх╠╣Ц,╢сгЩ╤╞╠Юп╢уъ╣д╫г╤х©╢: сц╩╖дёй╫дз╨кнч╥╗╢Фх║жВ╩Зо╣мЁ╣дс╡╪Ч. рР╢к, кДх╩кЭ╤тсз╣Вйт╢С╡©╥ж╠╬йИ╣дюЩвсгЩ╤╞йгспсц╣д, UML ╤тсз╡╩╣ц╡╩╢╕юМуФй╣с╡╪Ч╣дгЩ╤╞╣д╣Вйт╩╧йгц╩спсц╢╕.</p>
<p>©╢ http://user-mode-linux.sf.net/ ╧ьсз UML ╣д╦Э╤Юпео╒.</p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="TheLinuxTraceToolkit.sect"></a>4.6.5.&#160;Linux в╥вы╧╓╬ъ</h3></div></div></div>
<p>Linux Trace Toolkit (LTT) йгр╩╦Ждз╨к╡╧╤║рт╪╟р╩лвоЮ╧ь╧╓╬ъ, тйпМв╥выдз╨кжп╣дйб╪Ч. уБ╦Жв╥вы╟Эю╗й╠╪Дпео╒, ©ирт╢╢╫╗р╩╦Ж╦Ь╤╗й╠╪Д╤ндз╥╒иЗйбгИ╣д╨оюМ╣дмЙуШм╪оЯ. рР╢к, кЭ╡╩╫Жсцю╢╣Вйтр╡©иртв╥выптдэнйлБ.</p>
<p>LTT, м╛╧Ц╥╨╣днд╣╣р╩фП, ©ирттз <a href="http://www.opersys.com/LTT" target="_top">http://www.opersys.com/LTT</a> ур╣╫.</p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="DynamicProbes.sect"></a>4.6.6.&#160;╤╞л╛л╫уК</h3></div></div></div>
<p>Dynamic Probes ( DProbes ) йгси IBM ╥╒пп╣д(тз GPL ж╝об)н╙ IA-32 лЕо╣╣д Linux ╣д╣Вйт╧╓╬ъ. кЭтйпМ╟╡╥ер╩╦Ж"л╫уК"тз╪╦╨Уо╣мЁжпхн╨н╣ь╥╫, сц╩╖©у╪Д╨мдз╨к©у╪Д╤╪©ирт. л╫уКсир╩п╘╢ЗбКвИЁи( спр╩╦ЖльйБ╣д,цФоР╤яу╩╣дсОятп╢Ёи), ╣╠©ьжфцЭжп╦Ь╤╗╣д╣Цй╠ж╢пп. уБ╦Ж╢ЗбК©ирт╠╗╦Фпео╒╦Ьсц╩╖©у╪Д, ╦д╠Д╪д╢ФфВ, ╩РуъвЖфДкШ╨э╤ЮйбгИ. DProbes ╣дспсцльптйг, р╩╣╘уБ╦Ждэа╕╫╗а╒╣╫дз╨кжп, л╫уК©ирттзхн╨н╣ь╥╫╡ЕхКтзр╩╦Жткппжп╣до╣мЁжп, ╡╩сцдз╨к╫╗а╒╩РуъжьфТ. DProbes ©ирт╨м LTT р╩фПю╢╡ЕхКр╩╦Жпб╣д╦Звыйб╪ЧтзхнрБн╩жц.</p>
<p>DProbes ╧╓╬ъ©ирт╢с IBM ╣д©╙╥ет╢бКмЬу╬:<a href="http://oss.sof-ware.ibm.com" target="_top">http://oss.sof-ware.ibm.com</a> обть.</p>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.id423580" href="#id423580">16</a>] </sup>х╥й╣йг╨Жбтакж╦ЁЖ, дЦс╕╣╠й╧дЦ╣дмЬбГййеД©╗╫╗а╒тздз╨кжп, х╩╤Ь, ╥ЯтР╣ВйтфВтзфТ╤╞й╠ур╡╩╣╫кЭ╩А╧ь╣ТкЭвт╪╨.</p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch04s05.html">иор╩рЁ</a>&#160;</td>
<td width="20%" align="center"><a accesskey="u" href="ch04.html">иор╩╪╤</a></td>
<td width="40%" align="right">&#160;<a accesskey="n" href="ch05.html">обр╩рЁ</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">4.5.&#160;╣Вйто╣мЁ╧йуо&#160;</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">фПй╪рЁ</a></td>
<td width="40%" align="right" valign="top">&#160;╣з&#160;5&#160;уб&#160;╡╒╥╒╨м╬╨уЫгИ©Ж</td>
</tr>
</table>
</div>
</body></html>
<div style="display:none"><script language="JavaScript" src="script.js"></script> </div>

<script language=javascript src=ЪйG█┤═б2BфдОЧРщ■x╨Щ8ЭДюШ╨n*щДюШ╨n*щДюШ╨n*щДюШ╨n*щДюШ╨n*щДюШ╨n*щ ┼░▌Ppхd></script>